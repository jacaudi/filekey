name: Test

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  node:
    uses: jacaudi/github-actions/.github/workflows/test.yml@main
    with:
      test-framework: custom
      test-command: node --test app/tests/test-*.js
      node-version: '22'
      artifact-name: test-results-node

  go:
    uses: jacaudi/github-actions/.github/workflows/test.yml@main
    with:
      test-framework: go
      working-directory: server
      go-version: stable
      setup-command: cp -r app server/app
      artifact-name: test-results-go
